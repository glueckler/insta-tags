const cbs = [
  {
    heada: 'Get Social',
    firstTags: true,
    tags: ['#sleepythecreator', '#sanctuaryluv', '#alians', '#fullmoonmusic']
  },
  {
    heada: 'lifestyle1',
    firstTags: true,
    tags: [
      "#musicwriter",
      "#musicianphotography",
      "#musicianportrait",
      "#producerflow",
      "#producerslifestyle",
      "#studiogrind",
      "#nightphotosessions",
      "#nightcitylights",
      "#victoriabcphotography",
      "#victoriabcbuzz",
      "#victoriabcmusic",
      "#sleepyface",
      "#new2020",
      "#passionformusic",
      "#musicianstyle",
      "#bassmusicchina",
      "#expÃ©rimentalmusic",
      "#spotifyartists",
      "#independentmusicartist",
      "#artindependent",
      "#independentartiste",
      "#musicblogs",
      "#independentartistpromotion",
      "#independentartistspotlight",
      "#beatifulbritishcolumbia",
      "#iamdowntown",
      "#vancouverart",
      "#albertamusic",
      "#musicalberta",
      "#bcart",
      "#albertaartist",
      "#okanaganartist",
      "#canadaartist",
    ]
  },
  {
    heada: 'music low comp',
    firstTags: true,
    tags: [
      '#leftfield',
      '#leftfieldbass',
      '#leftfieldmusic',
      '#leftfieldhiphop',
      '#musicwriter',
      '#yvrarts',
      "#albertamusic",
      "#yvrmusic",
      "#musicbc",
      "#bcmusic",
      "#vancouvermusicscene",
      "#basstherapy",
      "#soundsystemculture",
      "#turntablism",
      "#prosound",
      "#dubmusic",
      "#technics1210",
      "#globalbass",
      "#londondj",
      "#djlights",
      "#djtechtools",
      "#melbournedj",
      "#clubculture",
      "#bristolnightlife",
      "#latenite",
      "#moonshine",
      "#phases",
      "#deepdubstep",
      "#psydub",
      "#intimatevenue",
      "#pksound",
      "#deepdnb",
      "#experimentalmusicart",
      "#beatscene",
      "#playlistcurator",
      "#downtempomusic",
      "#futurebeats",
      "#abletonlive10suite",
      "#abletontutorial",
      "#abletone",
      "#abletonbeats",
      "#mixing",
      "#fingerdrumming",
      "#producergrind",
      "#mixingengineer",
      "#homestudiosetup",
      "#audiogearz",
      "#imakebeats"
    ]
  },
  {
    heada: 'lifestyle2',
    firstTags: true,
    tags: [
      "#mylifeisbeautiful",
      "#mylifemystory",
      "#lovethislife",
      "#mylifemystyle",
      "#woofers",
      "#robotdanceparty",
      "#djdanceparty",
      "#musicandyoga",
      "#yogaandmusic",
      "#yogamusicproject",
      "#healingsounds",
      "#musicismedicine",
      "#meditative",
      "#truewanderer",
      "#isthisreallife",
      "#thisisamazing",
      "#thefeels",
      "#aestheticmoods",
      "#chillvibesonly",
      "#ravesparadise",
      "#aestheticvibe",
      "#vibey",
      "#gypsyvibes",
      "#hippielifeforme",
      "#hippielifestyle",
      "#hippielife",
      "#slushiimusic",
      "#itsabeautifulworld",
      "#wubs",
      "#upandup",
      "#revealed",
      "#artcomplex",
      "#colorsofinstagram",
      "#imaginationart",
      "#imaginative",
      "#humanspirit",
      "#mindseye",
      "#imagination_arts",
      "#imaginationatplay",
      "#imaginationartists",
      "#feedyourimagination",
      "#sexyimagination",
      "#imaginationland",
      "#psychedelicbeauties",
      "#trippynation",
      "#psyworld",
      "#psychedelicsoul",
      "#psychedelic_art",
      "#psychedeliclife",
      "#mademesmile",
      "#suchislife",
      "#dontletgo",
      "#truetomyself",
      "#yesyou",
      "#movingforward",
      "#youknowwhoyouare",
      "#keeponkeepingon",
      "#vibrate"
    ]
  },
  {
    heada: 'creative',
    firstTags: true,
    tags: [
      "#becalm",
      "#becalmandbuzzon",
      "#focusonthepositive",
      "#reflect",
      "#soultalk",
      "#latestmusic",
      "#trustyourheart",
      "#soundmind",
      "#listenclosely",
      "#songwriterðŸ–Š",
      "#becreativeeveryday",
      "#creativemindstalks",
      "#creativemindsmarketing",
      "#creativemindflow",
      "#creativemindsan",
      "#creativemindalive",
      "#creativemindarts",
      "#creativemindscollide",
      "#creativeminded",
      "#creativemindsintl",
      "#creativemindsetreset",
      "#mycreativecommunity",
      "#creativesoul",
      "#creativespirit",
      "#creativevibes",
      "#createcultivate",
      "#artwithheart",
      "#maketimeforart",
      "#happyartist",
      "#creativeflowers",
      "#artatnight",
      "#artthings",
      "#makemoreart",
      "#innerartist",
      "#rawartist",
      "#createart",
      "#createdaily",
      "#makeart",
    ]
  },
  {
    heada: 'travel',
    firstTags: true,
    tags: [
      "#travellingpost",
      "#travellingstyle",
      "#travelgrams",
      "#lastlight",
      "#scenerypics",
      "#sceneryporn",
      "#instascenery",
      "#sceneryshot",
      "#sceneryphoto",
      "#bushes",
      "#prettyview",
      "#waterflow",
      "#scenic",
      "#niceview",
      "#scenary",
      "#inspirarion",
      "#djlifestyle",
      "#instalifestyle",
      "#gettinglost",
      "#exploring_shots",
      "#travelhub",
      "#adventuring",
      "#wanderings",
      "#exploringtheworld",
      "#newplaces",
      "#wanderingdiary",
      "#wanderingheart",
      "#wanderingbc",
      "#wandering_soul",
      "#exploreearth",
      "#globetrotters",
      "#sceneries",
      "#lonelyroad",
      "#somewheremood",
      "#ontheplane",
      "#somewherecollective",
      "#somewhereintheworld",
      "#somewherealongtheway"
    ]
  },
  {
    heada: 'photography',
    firstTags: true,
    tags: [
      "#lightflare",
      "#saturationnation",
      "#saturations",
      "#unfocused",
      "#lowres",
      "#coldcolors",
      "#vivid",
      "#saturation",
      "#exposures",
      "#coldexposure",
      "#dirtymirror",
      "#filteredtofilth",
      "#filteredpictures",
      "#filteredselfies",
      "#filteredart",
      "#filteredasfuck",
      "#peaceout",
      "#androidphotography",
      "#phonephotograpy",
      "#randomshot",
      "#yesfilter",
      "#filtered",
      "#mwah"
    ]
  },
  {
    heada: 'city',
    firstTags: true,
    tags: [
      "#discovercity",
      "#citypicture",
      "#viewofthecity",
      "#lightdelight",
      "#darkcitypictures",
      "#myneighborhood",
      "#businessdistrict",
      "#crowds",
      "#downtowner",
      "#cityplace",
      "#towncenter",
      "#citylab",
      "#caughtmyeye",
      "#concretejunglela",
      "#concretejungleravers",
      "#concretejungledreams",
      "#citysights",
      "#cityliving",
      "#blondboy",
      "#cityboyshit",
      "#cityboyy",
      "#trainview",
      "#lovethecity",
      "#lookoutpoint",
      "#walkingaboutown",
      "#highabove",
      "#walkingabout",
    ]
  },
  {
    heada: 'locations',
    firstTags: true,
    tags: [
      '#vancouver',
      '#yvr',
      '#bc',
      '#alberta',
      '#canada',
      '#musicfest',
      '#victoriamusicscene',
      '#victoria',
      '#yyj',
      '#shambhala'
    ]
  },
  {
    heada: 'genres',
    tags: [
      '#halftime',
      '#turtablism',
      '#vibes',
      '#beats',
      '#VariousArtists',
      '#BassMusic',
      '#Abstract',
      '#FutureBeats',
      '#Dubstep',
      '#Dnb',
      '#Neuro',
      '#leftfield'
    ]
  },
  {
    heada: 'production and performance',
    tags: [
      '#ableton',
      '#abletonlive',
      '#abletontraining',
      '#creativespace',
      '#ableton101',
      '#abletonlover',
      '#bassmusicproducer',
      '#beats',
      '#electronicmusicproducer ',
      '#musicproducerlife',
      '#mixengineer',
      '#producer',
      '#producerlife',
      '#studio',
      '#beatmaker',
      '#musicalfreedom',
      '#musicproduction',
      '#daintree',
      '#audioengineering',
      '#studiovibes',
      '#newbeats',
      '#djlife',
      '#djset',
      '#dj'
    ]
  },
  {
    heada: 'musician',
    tags: [
      '#electronicmusicculture',
      '#electronicmusician',
      '#sound',
      '#boogie',
      '#music',
      '#bassmusic',
      '#pksound',
      '#turtablism',
      '#vibes',
      '#moonmusic',
      '#love',
      '#beats',
      '#freemusic',
      '#freebeats',
      '#upcomingartists',
      '#djlifestyle',
      '#musicproducerlife',
      '#musicproducergrind',
      '#mixingengineer',
      '#undergroundartist',
      '#independentartist',
      '#upandup',
      '#musicalfreedom',
      '#daintree',
      '#daintreesound',
      '#pressplay',
      '#experimentalmusic',
      '#ambience'
    ]
  },
];

//

//

const createElementFromHTML = htmlString => {
  var div = document.createElement('div');
  div.innerHTML = htmlString.trim();

  // Change this to div.childNodes to support multiple top-level nodes
  return div.firstChild;
};

// add checkboxes to page
const $checkboxes = document.getElementById('checkboxes');

const appendCheckbox = tag =>
  $checkboxes.append(
    createElementFromHTML(
      `<div><input class="tag-cb" type="checkbox" name="${tag}" value="${tag}">${tag}</div>`
    )
  );

cbs.forEach(({ heada, tags }) => {
  $checkboxes.append(createElementFromHTML(`<h3>${heada}</h3>`));
  tags.forEach(tag => appendCheckbox(tag));
});

//

//

// copying logic..

const copyToClipboard = text => {
  var textarea = document.createElement('textarea');
  textarea.value = text;
  document.body.appendChild(textarea);
  textarea.select();
  var result = document.execCommand('copy');
  document.body.removeChild(textarea);
  return result;
};

const shuffle = array => {
  // this is probably really cool, from stack overflow
  // https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array
  var currentIndex = array.length,
    temporaryValue,
    randomIndex;
  while (0 !== currentIndex) {
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }
  return array;
};

const genCheckedTagsList = () => {
  const firstTagList = [];
  const tagList = [];
  const MAX_TAGS = 27;
  document.querySelectorAll('.tag-cb').forEach(({ checked, value }) => {
    const firstOfAllList = cbs.find(({ firstTags }) => firstTags).tags;
    if (checked && firstOfAllList.includes(value)) {
      firstTagList.push(value);
      return;
    }
    if (checked) {
      tagList.push(value);
    }
  });
  // prevent duplicates
  return Array.from(new Set(firstTagList.concat(shuffle(tagList)).slice(0, MAX_TAGS + 1)));
};

const generateTagsStr = () => {
  const checkedTags = genCheckedTagsList();
  return `. \r\n. \r\n. \r\n. \r\n${checkedTags.join(' . ')}`;
};

const handleBBBClick = () => {
  copyToClipboard(generateTagsStr());
};

document.getElementById('bbb').addEventListener('click', handleBBBClick);

document.body.addEventListener('click', function updateCount() {
  var tagCheckboxes = document.querySelectorAll('.tag-cb');
  tagCheckboxes = Array.from(tagCheckboxes).filter(cb => cb.checked);
  document.getElementById('count').innerText = tagCheckboxes.length;
})
